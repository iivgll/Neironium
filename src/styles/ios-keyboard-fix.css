/* iOS Keyboard Fix Styles */

/* Prevent viewport bouncing on iOS */
html {
  position: fixed;
  height: 100%;
  width: 100%;
  overflow: hidden;
}

body {
  position: fixed;
  height: 100%;
  width: 100%;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: none;
}

/* iOS specific adjustments */
@supports (-webkit-touch-callout: none) {
  /* iOS only */

  /* Prevent keyboard from pushing content */
  .ios-keyboard-fix {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    will-change: transform;
  }

  /* When keyboard is visible */
  .ios-keyboard-visible {
    padding-bottom: 0 !important;
  }

  /* Input container adjustments */
  .ios-input-container {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 9999 !important;
    background: var(--bg-primary, #151515) !important;
    padding-bottom: calc(env(safe-area-inset-bottom, 0) + 20px) !important;
    transform: translate3d(0, 0, 0);
    -webkit-transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Ensure input stays above keyboard */
  .ios-input-container textarea,
  .ios-input-container input {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    font-size: 16px !important; /* Prevents zoom on iOS */
  }

  /* Adjust viewport when keyboard is open */
  @media (max-height: 500px) {
    .ios-keyboard-visible .ios-input-container {
      position: fixed !important;
      bottom: 0 !important;
    }
  }
}

/* iPhone 11, 12, 13 specific (standard models) */
@media only screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) {
  .ios-input-container {
    padding-bottom: calc(env(safe-area-inset-bottom, 0) + 40px) !important;
  }
}

/* iPhone 12 Pro, 13 Pro */
@media only screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) {
  .ios-input-container {
    padding-bottom: calc(env(safe-area-inset-bottom, 0) + 35px) !important;
  }
}

/* iPhone 12 mini, 13 mini */
@media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) {
  .ios-input-container {
    padding-bottom: calc(env(safe-area-inset-bottom, 0) + 30px) !important;
  }
}

/* Visual Viewport API fallback */
@supports (height: 100dvh) {
  .ios-input-container {
    bottom: calc(100vh - 100dvh) !important;
  }
}

/* Telegram WebApp specific */
.telegram-webapp .ios-input-container {
  padding-bottom: calc(env(safe-area-inset-bottom, 0) + 50px) !important;
}

/* Prevent body scroll when input is focused */
body.ios-input-focused {
  position: fixed;
  width: 100%;
}
